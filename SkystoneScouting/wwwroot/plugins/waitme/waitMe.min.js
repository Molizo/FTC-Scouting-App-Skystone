(function(n){n.fn.waitMe=function(t){return this.each(function(){function p(){var n=u.attr("data-waitme_id");u.removeClass(f+"_container").removeAttr("data-waitme_id");u.find("."+f+'[data-waitme_id="'+n+'"]').remove()}var u=n(this),f="waitMe",y,e,r,c=!1,o="background-color",s="",h="",l,i,a,v={init:function(){function it(n){k.css({top:"auto",transform:"translateY("+n+"px) translateZ(0)"})}var ft={effect:"bounce",text:"",bg:"rgba(255,255,255,0.7)",color:"#000",maxSize:"",source:"",onClose:function(){}},d,v,w,tt,k;i=n.extend(ft,t);a=(new Date).getMilliseconds();l=n('<div class="'+f+'" data-waitme_id="'+a+'"><\/div>');switch(i.effect){case"none":r=0;break;case"bounce":r=3;break;case"rotateplane":r=1;break;case"stretch":r=5;break;case"orbit":r=2;break;case"roundBounce":r=12;break;case"win8":r=5;c=!0;break;case"win8_linear":r=5;c=!0;break;case"ios":r=12;break;case"facebook":r=3;break;case"rotation":r=1;o="border-color";break;case"timer":r=2;v=n.isArray(i.color)?i.color[0]:i.color;s="border-color:"+v;break;case"pulse":r=1;o="border-color";break;case"progressBar":r=1;break;case"bouncePulse":r=3;break;case"img":r=1}if(s!==""&&(s+=";"),r>0){if(i.effect==="img")h='<img src="'+i.source+'">';else for(d=1;d<=r;++d)n.isArray(i.color)?(v=i.color[d],v==undefined&&(v="#000")):v=i.color,h+=c?'<div class="'+f+"_progress_elem"+d+'"><div style="'+o+":"+v+'"><\/div><\/div>':'<div class="'+f+"_progress_elem"+d+'" style="'+o+":"+v+'"><\/div>';e=n('<div class="'+f+"_progress "+i.effect+'" style="'+s+'">'+h+"<\/div>")}if(i.text&&i.maxSize===""&&(v=n.isArray(i.color)?i.color[0]:i.color,y=n('<div class="'+f+'_text" style="color:'+v+'">'+i.text+"<\/div>")),w=u.find("> ."+f),w&&w.remove(),tt=n('<div class="'+f+'_content"><\/div>'),tt.append(e,y),l.append(tt),u[0].tagName=="HTML"&&(u=n("body")),u.addClass(f+"_container").attr("data-waitme_id",a).append(l),w=u.find("> ."+f),k=u.find("."+f+"_content"),w.css({background:i.bg}),k.css({marginTop:-k.outerHeight()/2+"px"}),i.maxSize!==""){var et=e.outerHeight(),ot=e.outerWidth(),ut=et;i.effect==="img"?(e.css({height:i.maxSize+"px"}),e.find(">img").css({maxHeight:"100%"}),k.css({marginTop:-k.outerHeight()/2+"px"})):i.maxSize<ut&&tt.css({transform:"scale("+i.maxSize/ut+")"})}if(u.outerHeight()>n(window).height()){var nt=n(window).scrollTop(),b=k.outerHeight(),g=u.offset().top,rt=u.outerHeight(),p=nt-g+n(window).height()/2;p<0&&(p=Math.abs(p));p-b>=0&&p+b<=rt?(g-nt>n(window).height()/2&&(p=b),it(p)):(p=nt>g+rt-b?nt-g-b:nt-g+b,it(p));n(document).scroll(function(){var i=n(window).scrollTop(),t=i-g+n(window).height()/2;t-b>=0&&t+b<=rt&&it(t)})}w.on("destroyed",function(){i.onClose&&n.isFunction(i.onClose)&&i.onClose();w.trigger("close")});return n.event.special.destroyed={remove:function(n){n.handler&&n.handler()}},w},hide:function(){p()}};return v[t]?v[t].apply(this,Array.prototype.slice.call(arguments,1)):typeof t=="object"||!t?v.init.apply(this,arguments):void 0})};n(window).on("load",function(){n("body.waitMe_body").addClass("hideMe");setTimeout(function(){n("body.waitMe_body").find(".waitMe_container:not([data-waitme_id])").remove();n("body.waitMe_body").removeClass("waitMe_body hideMe")},200)})})(jQuery);